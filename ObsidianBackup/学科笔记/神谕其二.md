# 第三章
## 储存器扩展 p68-69
1. 【69 3.7】字扩展：利用多片1M×4位的SRAM芯片设计一个存储容量为1M×8位的SRAM存储器。
![[Pasted image 20240516152142.png]]
2. 【69 3.8】位扩展：利用256K×8位的SRAM芯片设计2048K×8位的存储器。
![[Pasted image 20240516152302.png]]
3. 字位扩展：
![[eb9c596c10aec37ece2f75832b5bec2.jpg]]
4. *数据线、地址线、存储芯片和CPU怎么连接、片选信号+经过译码器后和储存芯片连接*

## 储存器的硬件指标 p65
1. 存储容量：其中1KB=$2^{10}$B，1MB=$2^{20}$B，1GB=$2^{30}$B， 1TB=$2^{40}$B。为了清楚地表示其组织结构，存储容量也可表示为：存储字数(存储单元数)× 存储字长(每单元的比特数)。例如，1Mbit 容量的存储器可以组织成 1M×1bit，也可组织成 128K×8bit，或者 512K×4bit。
2. 存取时间：又称存储器访问时间，是从存储器接收到读/写命令开始到信息被读出或写入完成所需的时间。
3. 存储周期(存取周期)：是在存储器连续读写过程中一次完整的存取操作所需的时间， 即CPU连续两次访问存储器的最小间隔时间。通常，存储周期略大于存取时间。
4. 【90 3.3】设存储器容量为32字，字长64位，模块数m=4，分别用顺序方式和交叉方式进行组织。存储周期T=200ns，数据总线宽度为64位，总线传送周期τ=50ns。若连续 读出4个字，问顺序存储器和交叉存储器的带宽各是多少?
![[Pasted image 20240516154659.png]]
## cache的评价指标 p93
1. **命中率**：$\frac{cache完成存取的总次数}{cache完成存取的总次数+主存完成存取的总次数}$
![[Pasted image 20240516155230.png]]
3. **cache/主存系统的平均访问时间**：
$cache访问时间\times 命中率+(1-命中率)\times 主存访问时间$
![[Pasted image 20240516155534.png]]
4. **访问效率**：$\frac{1}{命中率+(1-命中率)\times 主存与cache的访问时间之比}$ 
![[Pasted image 20240516155849.png]]
5. 为提高访问效率，命中率h越接近1越好。r值以5～10为宜，不宜太大。
6. 【93 3.4】CPU执行一段程序时，cache完成存取的次数为1900次，主存完成存取的次数为100次，已知cache存取周期为50ns，主存存取周期为250ns，求cache/主存系统的效率和平均访问时间。
7. *几个概念的定义以及计算方式*
## 地址映射的三种方式 p94
1. *全相连映射的组织方式、映射地址所带来的地址结构、组织方式不一样导致储存地址的组成部分不一样，位数也不同、全相连是需要比对的位数和块号是一一对应的、检索过程，图上的字段编号，比较的东西是什么*
2. 全相连：将主存中一个块的地址(块号)与块的内容(字)一起存于cache的行中，其中块地址存于cache行的标记(tag)部分中。【3.30】*地址字段的位长度为什么一个是s一个是w，比较器为什么要比较s个二进制位：因为是全相连映射，需要比较所有的块才能确定储存的块是我需要的块*
![[Pasted image 20240517162952.png]]

3. 直接映射方式：一个主存块只能拷贝到cache的一个特定 行位置上去。将s位的主存块地址分成两部分：低r位主存区内块号作为cache 的行地址，s–r位区号作为标记(tag)与块数据一起保存在该行。当CPU以一个给定的内存 地址访问cache时，首先用r位区内块号找到cache中的特定一行，然后用地址中的s–r位 区号部分与此行的标记在比较器中做比较。*直接映射的比较过程：只需要比较区号，因为区内块号是直接映射*
![[Pasted image 20240517164004.png]]
4. *最常用的* 组相联映射方式：内存地址中，s位块号划分成两部分：低d位(2d=u)主存区内块号用于表示cache组号(而 不是cache行号)，高s–d位区号作为标记与块数据一起存于此组的某行中。*地址组成的位数和组相连的是不一样的*
![[Pasted image 20240517164454.png]]
![[Pasted image 20240517165253.png]]
## cache的替换策略 p100
1. 最不经常使用算法-LFU：*将一段时间内被访问次数最少的那行数据换出。*
   新行调入后从0开始计数，每访问一次，被访行的计数器增1。当需要替换时，对 这些特定行的计数值进行比较，将计数值最小的行换出，同时将这些特定行的计数器都清零。
2. 近期最少使用算法-LRU：*将近期内长久未被访问过的行换出。*
   cache每命中一次，命中行计数器清零，其他各行计数器增1。当需要替换时，比较各特 定行的计数值，将计数值最大的行换出。
3. 随机替换
## 虚拟存储器
1. *cache和虚存的同* p105 
   - 出发点相同：二者都是为了提高存储系统的性能价格比而构造的分层存储体系，都力图使存储系统的性能接近高速存储器，而价格和容量接近低速存储器。
   - 原理相同：都是利用了程序运行时的局部性原理把最近常用的信息块从相对慢速而大容量的存储器调入相对高速而小容量的存储器。
2. *cache和虚存的异* p105
   - *侧重点不同*：cache主要解决主存与CPU的速度差异问题；而就性能价格比的提高 而言，虚存主要是解决存储容量问题，另外还包括存储管理、主存分配和存储保护等方面。
   - 数据通路不同：CPU与 cache 和主存之间均可以有直接访问通路，cache 不命中时 可直接访问主存；而虚存所依赖的辅存与CPU之间不存在直接的数据通路，当主存不命中 时只能通过调页解决，CPU最终还是要访问主存。
   - 透明性不同：cache 的管理完全由硬件完成，对系统程序员和应用程序员均透明； 而虚存管理由软件(操作系统)和硬件共同完成，由于软件的介入，虚存对实现存储管理的 系统程序员不透明，而只对应用程序员透明(段式和段页式管理对应用程序员“半透明”)。
   - 未命中时的损失不同：由于主存的存取时间是cache的存取时间的5～10倍，而主存的存取速度通常比辅存的存取速度快上千倍，故主存未命中时系统的性能损失要远大于 cache 未命中时的损失。
3. 虚拟存储器的地址管理方式
   - 页式虚存地址映射
   - 段式虚存地址映射
   - 段页式虚拟存储器
# 第六章 *仲裁和传送协定，可能还会有其他小的概念*
## 总线仲裁
1. 集中式仲裁
 - 链式查询方式：链式查询方式的主要特点是，总线授权信号BG串行地从一个I/O接口传送到下一个I/O 接口。假如BG到达的接口无总线请求，则继续往下查询；假如BG到达的接口有总线请求， BG信号便不再往下查询。这意味着该I/O接口就获得了总线控制权。![[Pasted image 20240517190153.png]]
 - 计数器定时查询方式：总线上的任一设备要 求使用总线时，通过BR线发出总线请求。总线仲裁器接到请求信号以后，在BS线为“0” 的情况下让计数器开始计数，计数值通过一组地址线发向各设备。每个设备接口都有一个 设备地址判别电路，当地址线上的计数值与请求总线的设备地址相一致时，该设备置“1” BS 线，获得了总线使用权，此时中止计数查询。每次计数可以从“0”开始，也可以从中止点开始。![[Pasted image 20240517190425.png]]
 - 独立请求方式：当设备要求使用总线时，便发出该设 备的请求信号。总线仲裁器中有一个排队电路，它根据一定的优先次序决定首先响应哪个 设备的请求，给设备以授权信号BGi。![[Pasted image 20240517190456.png]]
 2. 分布式仲裁：不需要集中的总线仲裁器，每个潜在的主方功能模块都有自己的仲裁号和仲裁器。当它们有总线请求时，把它们唯一的仲裁号发送到共享的仲裁总线上，每个仲裁 器将仲裁总线上得到的号与自己的号进行比较。如果仲裁总线上的号大，则它的总线请求 不予响应，并撤销它的仲裁号。
 3. *查询的方式、主要是概念部分*
## 总线的数据传送模式
 1. *同步/异步总线定时协定的不同*
   - 在同步定时协议中，事件出现在总线上的时刻由总线时钟信号来确定。而异步总线定时协定不需要统一的公共时钟信号。总线周期的 长度是可变的。但总线的复杂性和成本都上升了。
## 总线的特性和技术指标
1. 物理特性是指总线的物理连接方式，包括总线的根数，总线的插头、 插座的形状，引脚线的排列方式等。
2. 功能特性描述总线中每一根线的功能。
3. 电气特性定义每一根线上信号的传递方向及有效电平范围。
4. 时间特性定义了每根线在什么时间有效。
5. *衡量总线性能的指标是总线带宽，它定义为总线本身所能达到的最高传输速率，计算如下* ![[Pasted image 20240517192047.png]]
# 第七章 *磁盘*
## 磁盘的技术指标 p223
1. 存储密度：存储密度分道密度、位密度和面密度。道密度是沿磁盘半径方向单位长度 上的磁道数，单位为道/英寸。位密度是磁道单位长度上能记录的二进制代码位数，单位为 位/英寸。面密度是位密度和道密度的乘积，单位为位/英寸2。
2. 存储容量：一个磁盘存储器所能存储的字节总数，称为磁盘存储器的存储容量。
3. 平均寻址时间：
 - 磁盘接到读/写指令后将磁头定位至所要访问的磁道上所需的时间，称为寻道 时间或找道时间、定位时间。
 - 寻道完成后，磁道上需要访问的扇区移动到磁头下方所需的 时间，称为等待时间或寻区时间、潜伏期、旋转延迟。它和磁盘转速有关，它用磁盘 旋转一周所需时间的一半来表示，即1/(2r)。
 4. 平均存取时间：存取(访问)时间是从读/写指令发出到开始第一笔数据读/写时所用的 平均时间，包括寻道时间、等待时间及相关的内务操作时间。可表示为：